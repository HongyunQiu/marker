(function(){"use strict";try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(".cdx-marker{background:rgba(245,235,111,.29);padding:3px 0}.cdx-marker[data-color=yellow]{background:rgba(245,235,111,.29)}.cdx-marker[data-color=green]{background:rgba(76,175,80,.25)}.cdx-marker[data-color=blue]{background:rgba(33,150,243,.25)}.cdx-marker[data-color=pink]{background:rgba(233,30,99,.25)}.cdx-marker[data-color=orange]{background:rgba(255,152,0,.25)}.cdx-marker[data-color=purple]{background:rgba(156,39,176,.25)}.cdx-marker-actions{display:grid;grid-template-columns:repeat(auto-fill,30px);gap:10px;padding:4px;align-items:center;justify-content:start}.cdx-marker-color{width:30px;height:30px;border-radius:50%;border:1px solid rgba(0,0,0,.2);cursor:pointer;padding:0;outline:none;transition:transform .2s ease}.cdx-marker-color.is-active{box-shadow:0 0 0 2px #00000026}.cdx-marker-color:hover{transform:scale(1.1)}.ce-popover--inline .ce-popover--nested .ce-popover__container{width:min-content!important;min-width:unset!important}.ce-popover--inline .ce-popover--nested .ce-popover__items{width:max-content}")),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var b=(n,o,s)=>{if(!o.has(n))throw TypeError("Cannot "+s)};var d=(n,o,s)=>{if(o.has(n))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(n):o.set(n,s)};var c=(n,o,s)=>(b(n,o,"access private method"),s);(function(n,o){typeof exports=="object"&&typeof module<"u"?module.exports=o():typeof define=="function"&&define.amd?define(o):(n=typeof globalThis<"u"?globalThis:n||self,n.Marker=o())})(this,function(){var a,p,u,f,h,C;"use strict";const n="",o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3536 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3536 9.31802L7.96729 12.7043C7.40889 13.2627 7.02827 13.9739 6.8734 14.7482L6.69798 15.6253C6.55804 16.325 7.17496 16.942 7.87468 16.802L8.75176 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3536 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',l=class l{constructor({api:t,config:e}){d(this,a);d(this,u);d(this,h);this.api=t,this.config=e||{},this.columns=typeof this.config.columns=="number"?this.config.columns:7,this.button=null,this.actions=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive},this.availableColors=this.config.colors||["yellow","green","blue","pink","orange","purple"],this.defaultColor=this.config.defaultColor||"yellow",this.currentColor=this.defaultColor,this.colorButtonsByName={},this.awaitingColorSelection=!1,this.pendingRange=null}static get CSS(){return"cdx-marker"}static get isInline(){return!0}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}renderActions(){const t=document.createElement("div");return t.classList.add("cdx-marker-actions"),t.style.gridTemplateColumns=`repeat(${this.columns}, 30px)`,this.colorButtonsByName={},this.availableColors.forEach(e=>{const i=document.createElement("button");i.type="button",i.classList.add("cdx-marker-color"),i.setAttribute("data-color",e),i.title=e,i.style.background=c(this,u,f).call(this,e),i.addEventListener("click",()=>{if(this.currentColor=e,c(this,a,p).call(this),this.pendingRange){const g=window.getSelection();g&&(g.removeAllRanges(),g.addRange(this.pendingRange)),this.wrap(this.pendingRange),this.awaitingColorSelection=!1,this.pendingRange=null,this.api.inlineToolbar&&typeof this.api.inlineToolbar.close=="function"&&this.api.inlineToolbar.close();return}const r=this.api.selection.findParentTag(this.tag,l.CSS);if(r){r.setAttribute("data-color",this.currentColor),this.api.inlineToolbar&&typeof this.api.inlineToolbar.close=="function"&&this.api.inlineToolbar.close();return}}),t.appendChild(i),this.colorButtonsByName[e]=i}),this.actions=t,c(this,a,p).call(this),t}surround(t){if(!t)return;let e=this.api.selection.findParentTag(this.tag,l.CSS);if(e){this.unwrap(e),this.awaitingColorSelection=!1,this.pendingRange=null,this.api.inlineToolbar&&typeof this.api.inlineToolbar.close=="function"&&this.api.inlineToolbar.close();return}if(!this.awaitingColorSelection){this.awaitingColorSelection=!0,this.pendingRange=t.cloneRange(),this.currentColor=this.defaultColor;return}}wrap(t){let e=document.createElement(this.tag);e.classList.add(l.CSS),e.setAttribute("data-color",this.currentColor);const i=t.extractContents();c(this,h,C).call(this,i),e.appendChild(i),t.insertNode(e),this.api.selection.expandToTag(e)}unwrap(t){this.api.selection.expandToTag(t);let e=window.getSelection(),i=e.getRangeAt(0),r=i.extractContents();t.parentNode.removeChild(t),i.insertNode(r),e.removeAllRanges(),e.addRange(i)}checkState(){const t=this.api.selection.findParentTag(this.tag,l.CSS);if(this.button.classList.toggle(this.iconClasses.active,!!t),t&&t.getAttribute){const e=t.getAttribute("data-color");e&&this.availableColors.includes(e)&&(this.currentColor=e)}c(this,a,p).call(this)}get toolboxIcon(){return o}static get sanitize(){return{mark:{class:!0,"data-color":!0}}}};a=new WeakSet,p=function(){this.actions&&Object.entries(this.colorButtonsByName).forEach(([t,e])=>{t===this.currentColor?e.classList.add("is-active"):e.classList.remove("is-active")})},u=new WeakSet,f=function(t){switch(t){case"yellow":return"#F5EB6F";case"green":return"#4CAF50";case"blue":return"#2196F3";case"pink":return"#E91E63";case"orange":return"#FF9800";case"purple":return"#9C27B0";default:return t}},h=new WeakSet,C=function(t){if(!t)return;(typeof t.querySelectorAll=="function"?t.querySelectorAll(`mark.${l.CSS}`):[]).forEach(i=>{const r=i.parentNode;if(r){for(;i.firstChild;)r.insertBefore(i.firstChild,i);r.removeChild(i)}})};let s=l;return s});
